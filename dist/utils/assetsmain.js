import makeSound from"./makesound.js";let assets={toLoad:0,loaded:0,imageExtensions:["png","jpg"],fontExtensions:["ttf","otf","ttc","woff"],audioExtensions:["mp3","ogg","wav","webm"],load(e){return new Promise((o=>{let t=()=>{this.loaded+=1,this.toLoad===this.loaded&&(this.toLoad=0,this.loaded=0,console.log("Assets finished loading"),o())};console.log("Loading assets ..."),this.toLoad=e.length,e.forEach((e=>{let o=e.split(".").pop();-1!==this.imageExtensions.indexOf(o)?this.loadImage(e,t):-1!==this.fontExtensions.indexOf(o)?this.loadFont(e,t):-1!==this.audioExtensions.indexOf(o)?this.loadSound(e,t):console.log("File type not recognized: "+e)}))}))},loadImage(e,o){let t=new Image;t.addEventListener("load",o,!1),this[e]=t,t.src=e},loadFont(e,o){let t=e.split("/").pop().split(".").pop(),s=document.createElement("style"),n="@font-face {font-family:'}"+t+"'; src: url('"+e+"');}";s.appendChild(document.createTextNode(n)),document.head.appendChild(s),o()},loadSound(e,o){let t=makeSound(e,o);t.name=e,this[t.name]=t}};export default assets;